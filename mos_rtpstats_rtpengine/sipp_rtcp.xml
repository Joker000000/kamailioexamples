<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE scenario SYSTEM "sipp.dtd">

<scenario name="Test">
    <!-- In client mode (sipp placing calls), the Call-ID MUST be         -->
    <!-- generated by sipp. To do so, use [call_id] keyword.                -->
    <send retrans="500">
        <![CDATA[

      INVITE sip:[service]@192.168.1.109:[remote_port] SIP/2.0
      Via: SIP/2.0/[transport] [local_ip]:[local_port];branch=[branch]
      From: 4000 <sip:4000@companysomethingtelecom.com:[local_port]>;tag=[call_number]
      To: [service] <sip:[service]@192.168.1.109:[remote_port]>
      Call-ID: [call_id]
      CSeq: 1 INVITE
      Contact: sip:zt@[local_ip]:[local_port]
      Max-Forwards: 70
      User-Agent: Test
      Content-Type: application/sdp
      Content-Length: [len]

      v=0
      o=zt 53655765 2353687637 IN IP[local_ip_type] [local_ip]
      s=-
      c=IN IP[media_ip_type] [media_ip]
      t=0 0
      a=rtcp-xr:rcvr-rtt=all:10000 stat-summary=loss,dup,jitt,TTL voip-metrics
      m=audio [media_port] RTP/AVPF 0 101
      a=rtcp:8881
      a=rtpmap:0 PCMU/8000
      a=rtpmap:101 telephone-event/8000

    ]]>
    </send>

    <recv response="100"
          optional="true">
    </recv>

    <recv response="180" optional="true">
    </recv>

    <recv response="183" optional="true">
    </recv>

    <!-- By adding rrs="true" (Record Route Sets), the route sets         -->
    <!-- are saved and used for following messages sent. Useful to test   -->
    <!-- against stateful SIP proxies/B2BUAs.                             -->
    <recv response="200" rrs="true" td="true">
        <action>
            <ereg regexp="sip:.*@([0-9]{1,3}\.){3}[0-9]{1,3}" search_in="hdr" header="Contact:" check_it="true"
                  assign_to="6"/>
            <exec rtp_stream="rtp_example.raw"/>
            <!-- <exec play_pcap_audio="al1.pcap"/> -->
            <!-- <exec play_pcap_audio="g711pcma.pcap"/> -->
        </action>
    </recv>

    <!-- Packet lost can be simulated in any send/recv message by         -->
    <!-- by adding the 'lost = "10"'. Value can be [1-100] percent.       -->
    <send>
        <![CDATA[

      ACK [$6] SIP/2.0
      Via: SIP/2.0/[transport] [local_ip]:[local_port];branch=[branch]
      From: 4000 <sip:4000@companysomethingtelecom.com:[local_port]>;tag=[call_number]
      To: [service] <sip:[service]@192.168.1.109:[remote_port]>[peer_tag_param]
      Call-ID: [call_id]
      CSeq: 1 ACK
      Max-Forwards: 70
      Route:<sip:192.168.1.109;lr;ftag=[call_number];nat=yes>
      User-Agent: Test
      Content-Length: 0

    ]]>
    </send>

    <pause milliseconds="20000"/>

    <!-- The 'crlf' option inserts a blank line in the statistics report. -->
    <send retrans="500">
        <![CDATA[

      BYE [$6] SIP/2.0
      Via: SIP/2.0/[transport] [local_ip]:[local_port];branch=[branch]
      From: 4000 <sip:4000@companysomethingtelecom.com:[local_port]>;tag=[call_number]
      To: [service] <sip:[service]@192.168.1.109:[remote_port]>[peer_tag_param]
      Call-ID: [call_id]
      CSeq: 1 BYE
      Max-Forwards: 70
      Route:<sip:192.168.1.109;lr;ftag=[call_number];nat=yes>
      User-Agent: Test
      Content-Length: 0

    ]]>
    </send>

    <recv response="200" crlf="true">
    </recv>

    <!-- definition of the response time repartition table (unit is ms)   -->
    <ResponseTimeRepartition value="500,1000,2000,3000,4000,4000,4000,4000,4000,4000"/>

    <!-- definition of the call length repartition table (unit is ms)     -->
    <CallLengthRepartition value="10, 50, 100, 500, 1000, 5000, 10000"/>

</scenario>

